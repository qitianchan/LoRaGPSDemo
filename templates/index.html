<!DOCTYPE html>
<html lang="en">
    <head>
        <title>TDOA定位算法仿真系统</title>

        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <link rel="stylesheet" media="screen" href="/static/css/style.css">
        <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png">
        <link href="http://libs.baidu.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
        <script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
    </head>
    <body>
    <nav class="navbar navbar-default navbar-fix-top">
      <div class="container-fluid">
        <ul class="nav navbar-nav">
          <li><a href="/">Home</a></li>
          <li><a href="{{ url_for('devices') }}">基站与节点</a></li>
        </ul>
      </div>
    </nav>
      <article class="row">
        <div class="col col-xs-12 col-md-8 devices-map-container" id="mapContainer">
        </div>
        <div class="col   col-md-4  " id="controls" >
            <!--<div class="" style="margin-bottom: 40px;">-->
                <!--<img src="{{ url_for('static', filename='image/niot.png') }}"/>-->
            <!--</div>-->
            <p>GPS可对室外目标进行准确定位，但由于墙体等对GPS信号的遮挡导致GPS无法实现对室内目标的准确定位。LoRa技术采用扩频调制方式，有效抵抗衰落效应，可对室内目标进行准确定位。</p>

            <p>基于LoRa技术的定位系统，通过在固定位置部署4个以上LoRaWAN基站，服务器根据目标节点发送信号到达各基站的飞行时间差（TDoA-Time Difference on Arrival）对目标节点的位置进行估算。该系统通过添加随机噪声来模拟实际环境中由于信号衰落等造成的时间误差。实际应用中，服务器通过各基站上传信号的时间戳来获取TDoA，进而计算出目标节点的位置。</p>

            <p>左图是对xx定位系统的模拟，可演示对方圆5公里内目标的定位效果。可以选择不同的基站进行模拟</p>
            <h4 class="text-info">点击地图上的标记点选择实际点 <span class="small">(估算位置以小红旗表示）</span></h4>
                <form action="" class="form">
                    <div class="data-box">
                    <div class="col-sm-6">
                        <div class=""><h5 class="text-info">基站数量</h5></div>
                        <div class="radio"><label><input type="radio" value="4" name="stationCount" id="station-four" checked>4个基站</label></div>
                        <div class="radio"><label><input type="radio" value="6" name="stationCount" id="station-six">6个基站</label></div>
                        <div class="radio"><label ><input type="radio" value="8" name="stationCount" id="station-eight">8个基站</label></div>
                    </div>
                    <div class="col-sm-6">
                        <div>
                            <h5 class="text-info">标准误差值（&mu;s）</h5>
                        </div>
                        <div class="radio"><label><input type="radio" value="300" name="deviation" id="deviation-300" checked>1&mu;s</label></div>
                        <div class="radio"><label><input type="radio" value="450" name="deviation" id="deviation-450">1.5&mu;s</label></div>
                        <div class="radio"><label><input type="radio" value="600" name="deviation" id="deviaation-600">2&mu;s</label></div>
                    </div>
            </div>

            </form>
            <div class="data-box" style="margin-bottom: 8px;">
                <div><h4 class="text-info">误差：（m）</h4><h4 id = "error" class="text-danger"></h4></div>
            </div>
            <div class="text-info" id="simulateInfo"></div>
            <div id="chart" style="width: 600px;height:400px;"></div>


<p>该系统通过添加随机噪声来模拟实际环境中由于信号衰落等造成的时间误差。实际应用中，服务器通过各基站上传信号的时间戳来获取TDoA，进而计算出目标节点的位置。</p>
        </div>

      </article>
      <script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=134542f782807947857e954af5848639"></script>
     <script type="text/javascript" src="http://cache.amap.com/lbs/static/addToolbar.js"></script>
      <script type="text/javascript" src="{{ url_for('static', filename='js/index.js') }}"></script>
      <script type="text/javascript" src="{{ url_for('static', filename='js/echarts.min.js') }}"></script>
      <script src="http://libs.baidu.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    </body>
</html>

